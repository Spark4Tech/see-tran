<!-- app/templates/fragments/transit_system_list.html -->
{% if transit_systems %}
  {% for system in transit_systems %}
  <div class="transit-system-card bg-slate-800/50 rounded-lg border border-slate-700/30 p-6 hover:bg-slate-800/70 transition-all cursor-pointer group"
       hx-get="/api/transit-systems/{{ system.id }}/details" hx-target="#transit-system-details" hx-swap="innerHTML">
    
    <!-- Card Header -->
    <div class="flex items-start justify-between mb-4">
      <div class="flex-1">
        <div class="flex items-center space-x-3 mb-2">
          <div class="w-3 h-3 bg-green-500 rounded-full"></div>
          <h3 class="font-semibold text-white text-xl group-hover:text-blue-300 transition-colors">{{ system.name }}</h3>
          
          <!-- Quick Status Indicators -->
          <div class="flex items-center space-x-2">
            {% if system.website %}
            <div class="w-2 h-2 bg-blue-400 rounded-full" title="Has Website"></div>
            {% endif %}
            {% if system.transit_map_link %}
            <div class="w-2 h-2 bg-green-400 rounded-full" title="Has Transit Map"></div>
            {% endif %}
            {% if system.contact_email %}
            <div class="w-2 h-2 bg-purple-400 rounded-full" title="Has Contact Email"></div>
            {% endif %}
          </div>
        </div>
        
        <!-- Location and Description -->
        <div class="space-y-1 mb-3">
          {% if system.location %}
          <p class="text-slate-300 text-sm flex items-center">
            <svg class="w-4 h-4 mr-1 text-slate-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
            </svg>
            {{ system.location }}
          </p>
          {% endif %}
          
          {% if system.description %}
          <p class="text-slate-400 text-sm">{{ system.description[:100] }}{% if system.description|length > 100 %}...{% endif %}</p>
          {% endif %}
        </div>
        
        <!-- Key Information -->
        <div class="flex items-center space-x-4 text-xs text-slate-400">
          <span>🏢 {{ system.functional_areas|length }} functional areas</span>
          {% if system.ceo %}
          <span>👨‍💼 CEO: {{ system.ceo }}</span>
          {% endif %}
          {% if system.contact_name %}
          <span>📞 Contact: {{ system.contact_name }}</span>
          {% endif %}
        </div>
      </div>
      
      <!-- Right Side Stats -->
      <div class="text-right">
        <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center mb-2">
          <span class="text-lg font-bold text-white">{{ system.functional_areas|length }}</span>
        </div>
        <div class="text-xs text-slate-500 text-center">Areas</div>
      </div>
    </div>
    
    <!-- Card Footer with Quick Actions -->
    <div class="flex items-center justify-between pt-3 border-t border-slate-700/30">
      <div class="flex items-center space-x-2">
        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
        <span class="text-xs text-slate-400">Active</span>
        
        <!-- Contact Quick Actions -->
        {% if system.contact_phone or system.phone_number %}
        <a href="tel:{{ system.contact_phone or system.phone_number }}" 
           class="text-xs text-green-400 hover:text-green-300 ml-2 transition-colors"
           onclick="event.stopPropagation()" title="Call">
          📞
        </a>
        {% endif %}
        
        {% if system.contact_email %}
        <a href="mailto:{{ system.contact_email }}" 
           class="text-xs text-blue-400 hover:text-blue-300 transition-colors"
           onclick="event.stopPropagation()" title="Email">
          ✉️
        </a>
        {% endif %}
        
        {% if system.website %}
        <a href="{{ system.website }}" target="_blank" 
           class="text-xs text-purple-400 hover:text-purple-300 transition-colors"
           onclick="event.stopPropagation()" title="Website">
          🌐
        </a>
        {% endif %}
      </div>
      
      <!-- Edit Action -->
      <button class="text-xs text-slate-500 hover:text-slate-300 transition-colors px-2 py-1 rounded hover:bg-slate-700/50"
              hx-get="/api/transit-systems/{{ system.id }}/form" hx-target="#transit-system-details" hx-swap="innerHTML"
              onclick="event.stopPropagation()" title="Edit">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
        </svg>
      </button>
    </div>
  </div>
  {% endfor %}
{% else %}
<div class="text-center py-12">
  <div class="w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4">
    <svg class="w-8 h-8 text-slate-500" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
    </svg>
  </div>
  <h3 class="text-lg font-medium text-slate-400 mb-2">No Transit Systems Found</h3>
  <p class="text-slate-500">Try adjusting your search or add a new transit system.</p>
</div>
{% endif %}